<!-- blog_form.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>{% if object %}Edit{% else %}Create{% endif %} Blog Post</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-4">
    <h2 id="form-heading">{% if object %}Edit{% else %}Create{% endif %} Blog Post</h2>
    <form method="post" action="{% if object %}{% url 'blog_edit' object.pk %}{% else %}{% url 'blog_create' %}{% endif %}" aria-labelledby="form-heading">
        {% csrf_token %}
        {{ form.non_field_errors }}
        <div class="mb-3">
            {{ form.title.label_tag }}
            {{ form.title }}
            {{ form.title.errors }}
        </div>
        <div class="mb-3">
            {{ form.content.label_tag }}
            {{ form.content }}
            {{ form.content.errors }}
        </div>
        <div class="mb-3">
            {{ form.category.label_tag }}
            {{ form.category }}
            {{ form.category.errors }}
        </div>
        <div class="mb-3">
            {{ form.tags.label_tag }}
            <select id="id_tags" name="tags" class="form-select" multiple>
                {% for tag in form.fields.tags.queryset %}
                <option value="{{ tag.id }}" {% if tag in form.instance.tags.all %}selected{% endif %}>
                    {{ tag.name }}
                </option>
                {% endfor %}
            </select>
            {{ form.tags.errors }}
        </div>
        <button type="submit" class="btn btn-primary">Save</button>
        <a href="{% url 'blog_list' %}" class="btn btn-secondary">Cancel</a>
    </form>
</div>
</body>
</html>